\usepackage[english]{babel}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{nameref}
\usepackage{enumitem}
\usepackage{amsthm}
\usepackage{listings}
\usepackage{color}
\usepackage{makeidx}
\usepackage{bytefield}
\usepackage{url}
\usepackage[totoc]{idxlayout}
\usepackage[font=small,labelfont=bf]{caption}
\usepackage{eurosym}
\usepackage{ctable}
\usepackage{morefloats}
\usepackage{siunitx}
\usepackage{tcolorbox}
\usepackage{etoolbox}
\usepackage[style=ieee]{biblatex}
\usepackage{appendix}
\usepackage{mdframed}
\usepackage{emptypage}

% Table of contents formatting
\renewcommand{\contentsname}{Table of Contents}
\setcounter{tocdepth}{3}

% Headers and page numbering
\pagestyle{fancy}
\fancyhead{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\leftmark}
\fancyhead[LE,RO]{\thepage}
\fancyfoot{}

\fancypagestyle{plain}{%
\fancyhf{}%
\fancyfoot{}%
\renewcommand{\headrulewidth}{0.0pt}%
}
% \fancyhf{}
% \lhead{\thepage}
% \chead{}
% \rhead{\leftmark}
% \lfoot{}
% \cfoot{}
% \rfoot{}



% Code and pseudocode
\usepackage[final]{minted}
\definecolor{codebg}{rgb}{0.975,0.975,0.975}

\mdfsetup{skipabove=0.4mm,skipbelow=0.4mm}
\BeforeBeginEnvironment{minted}{\singlespacing\begin{mdframed}[backgroundcolor=codebg, innertopmargin=1mm, frametitlebelowskip=0pt, frametitleaboveskip=0pt, splittopskip=0pt,linewidth=0.75pt]}
\AfterEndEnvironment{minted}{\end{mdframed}\onehalfspacing}

% Boxed code
% \usepackage[draft=true]{minted}
% \BeforeBeginEnvironment{minted}{\singlespacing\begin{tcolorbox}[breakable][arc=0mm, colback=codebg]}%
% \AfterEndEnvironment{minted}{\end{tco\UrlBreaks}{\do\/\do\-\do\_\do\.\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z}lorbox}\onehalfspacing}%

% Algorithm2e style
\usepackage[linesnumbered,lined,boxruled]{algorithm2e}
\newcommand\mycommfont[1]{\ttfamily\textcolor{blue}{#1}}
\SetCommentSty{mycommfont}
\setlength{\algomargin}{2em}

% Math formatting
\DeclareMathSizes{12}{13}{7}{7}

% Code line numbers
\renewcommand{\theFancyVerbLine}{\sffamily
\textcolor[rgb]{0.5,0.5,0.5}{\scriptsize
\oldstylenums{\arabic{FancyVerbLine}}}}

% TODO: (?): Set colour of links to black so that they don't show up when printed
\usepackage{hyperref}
\hypersetup{%
    colorlinks=true,%
    linkcolor=black,%
    citecolor=blue,%
    breaklinks=true,%
    unicode%
}

% Tables
\usepackage{booktabs}
\usepackage{threeparttable}
\usepackage{array}
\newcolumntype{x}[1]{%
>{\centering\arraybackslash}m{#1}}%

% Set figure legends and captions to be smaller sized sans serif font
\usepackage[font={footnotesize,sf}]{caption}

% Allow for long captions and float captions on opposite page of figures
% \usepackage[rightFloats, CaptionBefore]{fltpage}

% Don't let floats cross subsections
% \usepackage[section,subsection]{extraplaceins}

\onehalfspacing
\setlength{\headheight}{20pt} 

\renewcommand{\UrlBreaks}{\do\/\do\-\do\_\do\.\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z}	
